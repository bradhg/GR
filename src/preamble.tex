
% Preamble

% Packages
% =====================
% Font
% =====================
\usepackage{fontspec}                % use system/OpenType/TrueType fonts (LuaLaTeX/XeLaTeX only)
\setmainfont{Times New Roman}        % set main body text font

% =====================
% Math/Physics
% =====================
\usepackage{mathtools}                  % math enhancements on top of amsmath
\mathtoolsset{showonlyrefs}             % number only equations that are referenced
\numberwithin{equation}{subsubsection}  % make equation numbers be subsection#.equation#

\usepackage[
    warnings-off={                      % suppress harmless unicode-math vs mathtools warnings
        mathtools-colon,
        mathtools-overbracket
    }
]{unicode-math}                         % use Unicode/OpenType math fonts

\setmathfont{STIX Two Math}[            % select the math font
    scale = 1.3                         % and make it a little bigger
]
\setmathfont[
    version  = bold,
    FakeBold = 2                        % thickens the strokes of the existing font glyphs by a small amount.
]{STIX Two Math}

\usepackage{cancel}                     % strike through terms in equations
\usepackage{relsize}                    % make math symbols larger/smaller relative to current size

\usepackage{siunitx}                    % format units

\usepackage{physics}

% =====================
% LUA
% =====================
\usepackage{luacode}
\usepackage{lualatex-math}


% =====================
% Page layout / typography
% =====================
\usepackage[margin=1in]{geometry}       % set page margins
\usepackage{microtype}                  % improve spacing and justification

% =====================
% Tables / lists / colors
% =====================
\usepackage{booktabs}                   % professional table rules (\toprule, etc.)
\usepackage{tabularx}                   % auto-stretching tables to fit width
\usepackage{array}                      % more control over column definitions
\usepackage{xcolor}                     % color support
\usepackage{enumitem}                   % fine-tune list spacing and labels

% =====================
% References / links
% =====================
%\usepackage{hyperref}                  % clickable links and PDF metadata





\setlist[itemize]{leftmargin=5.5em, labelsep=0.6em,
    itemsep=0pt, topsep=0pt, parsep=0pt, partopsep=0pt}

\newcolumntype{L}{>{\raggedright\arraybackslash}X}



\setlength{\jot}{8pt}


% Define highlight colors
\definecolor{myorange}{RGB}{230,97,0}   % dark orange
\definecolor{myteal}{RGB}{0,119,136}    % teal
\definecolor{myblue}{RGB}{0,92,230}      % strong royal blue
\definecolor{mygreen}{RGB}{0,150,0}      % strong green


% Macros for coloring
\renewcommand{\O}[1]{\color{myorange}{#1}}
\newcommand{\G}[1]{\color{mygreen}{#1}}
\newcommand{\T}[1]{\color{myteal}{#1}}


\NewDocumentCommand{\frap}{mm}{\left(\frac{#1}{#2}\right)}

\newcommand{\recip}[1]{\frac{1}{#1}}

\newcommand{\pg}[1]{\ensuremath{\pgsplit#1\relax}}
\newcommand{\pgsplit}[3]{∂_{#1}\,g_{#2#3}}

\newcommand{\pgz}[1]{\ensuremath{\pgsplitzero#1\relax}}
\newcommand{\pgsplitzero}[3]{\cancelto{0}{∂_{#1}\,g_{#2#3}}}

% make text and math bold - used for headers rows with math symbols
\newcommand{\bold}[1]{{\bfseries\boldmath #1}}



\setlength{\parskip}{0.5em} % optional, improves paragraph spacing
\interlinepenalty=5000

\begin{luacode*}
  dofile("util.lua")  -- Load utility functions
\end{luacode*}